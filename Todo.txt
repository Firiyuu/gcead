x	fix IDAC4 packet which I don't know how to interpret
	x	test manually triggered digital signal
	x	why is digital signal randomly high?
	x	test recording for a long time
	x	check whether other IDAC4 programs also get occasional digital highs on channel 2
	x	check whether other IDAC4 programs also get occasional signal drop-out on analog 1
x	2 decimal places for times
	EAD markers:
	x	no time
	x	thicker tick
	x	for graphical display, see my hand-written notes
	x	BUG: can only be set on the AVE waves (for both EAD and FID)
	x	For EAD markers, drag on tick marker instead of hypothetical marker text
	x	when user drags marker
		x	don't move the ends with it until user gets close to the ends
		automation: when user ctrl-clicks on FID wave
		x	search for upper peak in surrounding
		x	search for up/slant in surrounding
			prevent searching past an existing selected peak
			automatically remove autodetected peak
	x	automation: when user ctrl-clicks on EAD wave
		x	set left handle at point of click
		x	automatically search for lower peak in surrounding
			prevent searching past an existing selected peak
	x	show correct mV value
	x	CTRL-click only in marker edit mode
	x	move markers only in marker edit mode
	Marker view:
	x	Update "m_params.peakMode == EadMarkerMode_Edit" since we now have "m_params.task == EadTask_Markers"
	x	create marker view
	x	put marker controls in marker view
	x	move FID listbox to marker view
	x	remove actions->markersEdit
	x	rename actions->markersHide -> show
	x	remove marker controls from toolbar
	x	move TaskReviewWidget help text to TaskMarkersWidget
	-	remove TaskReviewWidget::on_scope_peakModeChanged()
	x	make sure handles can be moved again
	x	improve tab color
x	Windows: Double-click on .EAD file from different directory than GcEad.exe, and see whether IDAC can still be accessed.
	
?	Fix "RECORDING: ??.??" size
	BUG: when scrolling left/right with the middle mouse button, scrolling sometimes "jumps" sporatically
	BUG: Windows; start recording; close program; select discard twice; shouldn't crash
	When dragging selection area: if user presses ESC, then abort selection
	integrate filter code into GcEad
	create mac installable
	Screenshots for Peter's documentation
	more unit tests
	
	Question for Peter:
		should I drop "min" unit from time when the unit is minutes?
		is the thicker tick what you had in mind?
	
	mac: get isochronous transfer to work for IDAC4 (try libusb-1.1 when it comes out)
	import of Autospike-CSV files
	import of old EAG files
	x	EAD wave
	x	FID wave
		scaling factors
		comments
	Installation routine
		Prohibit 64bit installation
		Install USB filter
		http://support.bitrock.com/article/how-do-i-make-the-installer-display-an-error-message-to-the-user-under-certain-circumstances
		http://support.bitrock.com/article/execute-specific-actions-for-a-platform-using-a-platformtest-rule
	Think about merging recording from another EAD file
	?	import all records from another EAD file
		test importing from both GcEad/2010 and the old EAD program
		but: also need to let user delete waves then?
*	Output the steigung of the EAD peak in the CSV file
		amplitude
		dauer
		steigung nach unten
		steigung nach oben
	Create unit tests
	x	load sample project
	x	charts
	x	zooming
	x	scrolling
	x	edit/show wave comments
	.	peaks
			show time
			show percentage
			show amplitude
			enter and leave markers mode
	x	hiding/unhiding waves
	x	adding/removing extra waves from charts
	x	inverting a wave
	.	save/load
			wave comment with XML special characters
			file comment with XML special characters
			BUG: in Chart:All, EAG Ave doesn't remain hidden
		importing from both GcEad/2010 and the old EAD program
		publishing
		recording
			recording label shown when recording starts
			recording label updates during recording (RECORDING & REMAINING)
			recording label hidden after recording done
			chart updates during recording
			proper scrolling as recording goes off current visible region
		loading/saving settings
			show peak percent vs amplitude
	Improve handling of IDAC overflow
	Run unit tests in GUI
		separate View and ViewMain
		create ViewTest
		run with valgrind
	Create new installer for Windows
		build EXE in Windows
		update version number too

Windows 7 x64 USB:
	http://www.jungo.com/st/wdusb.html#
	http://www.thesycon.de/eng/usbio.shtml
	Could WinUSB be used with IDAC2, or does the reset requirement (see IdacDriverUsb::sendFirmware) prevent this?
	Could IDAC4 firmware be re-written to not use isochronous transfer, so that WinUSB could be used?
	Could IDAC firmware be rewritten to implement a "Communication Class", in particular "Asynchronous Transfer Mode", and then use the standard Windows driver?

DONE:
x	In record mode, when data gets to end of screen, use page-right instead of zoom-out
x	After recording stop, re-adjust scrollbars and offset
x	Add peak amplitude
	x	Markers action
	x	Markers menu
	x	Peak options for choosing to display percent vs. amplitude
	x	ChartPixmap should respect peak option
	x	Load the user choice for peak percent vs. amplitude
	x	Save the user choice for peak percent vs. amplitude
	x	Make sure amplitude changes as we shift the handle
	x	Save amplitude to retention data export
	x	Display amplitude value and units nicely on chart
	x	Calculate amplitude when .EAD loaded
x	BUG: ChartPixmap::drawWaveformDigital, it's possible for it to lock up
x	File comment dialog needs to be wider, and it should be multiline
x	SVG saving: fix the height and width in order to eliminate all that extra blank space.
x	Create hidden test routine to record lots of waves 
	x	Test in Windows
	x	Test making 4 recordings; save file; close GeEad; reopen file; try recording more
	x	Run longer recording tests in windows
	x	Log USB error messages
	x	Run non-recording ScopeTests in valgrind
x	Show time elapsed instead of time remaining when recording
x	"Load Sample Project...": remove "..."
x	Log CHECK_* messages with time
	x	Shorter date/time format
	x	Add mechanism to write more data to the log
x	Export EAG amplitude data
x	Corraine's request is for EAD instead of FID
	x	show time below on EAD waves
	x	show amplitude on EAD waves
	x	fix amplitude calculation
	x	draw area bars on EAD waves when in Edit Peaks mode
	x	place area markers further apart on creation
	x	ctrl-click on EAD makes peak with area bars
	x	Update instructions
	x	Update other text (Peak? Marker?)


	INSTALLER:
		MAC:
			offer to start program after installation
			how to install libusb on mac? (see http://www.ellert.se/twain-sane/)
			readme for mac about libusb?
		WINDOWS:
			verify libusb on vista
	IDAC2
	?	IdacDriver2: get inverted status correct
		handle 0x7ffe (or whatever the reset code is)? (only if I can look at the original code which generated/handled 0x7ffe)
		get symbolic codes for the IDAC2
	TEST:
		test that voltage conversions are done right
		test that digital stimulus channel works on IDAC2
		is the decimation value really right for IDAC2?
		run through a couple use-cases
	FOR PETER:
		USB drivers CANNOT co-exist with old drivers
		IDAC2: same signal on INPUT 2 reads about 10x smaller than on INPUT 1...
		IDAC2: when I set ext amp=1, signal on INPUT 1 is *2mV* peak to peak
		IDAC4: when I set ext amp=10, signal on INPUT 1 is *1mV* peak to peak


	CLEANUP:
	x	remove/reduce compiler warnings
	x	suppress debug output in release mode
	x	svn:eol-style=native on all relevant files
	x	copyright notices in all files
	x	svn:ignore relevant directories/files
	x	set proper app version number

	
	testing
		Verify that all menu actions are connected
		Run program through valgrind
	user documentation
	programmer documentation
	open-source it
		upload EXEs to sourceforge

FUTURE STUFF: doesn't fit in this contract, but should be done as soon as possible
	add programmer documentation to IdacDriver* projects

FUTURE STUFF: doesn't belong in this contract, but might be done as a refinement later
	Markers Edit; click Add; move marker; remove marker: autodetect of peak should be re-added?
	BUG: Load Sample Project, edit it, Save As over an existing file: should ask for overwrite confirmation!  Appears to be a Qt or KDE bug, because other applications have the same problem, and I think it might have worked correctly in windows -- 2010-05-05.
	integrate RecordHandler into Idac/ or IdacDriver/ (and delete RecordHandler)
	ChartWidget: vertical "crosshair" line
	ChartWidget: When changing number of horizontal divisions in Publish task, move the scrollbar appropriately
	ChartWidget: When the user first presses Ctrl, update the mouse cursor if appropriate (i.e., about to set a peak)
	ChartWidget: Don't let user zoom in on an empty document using mouse dragging
	ChartWidget: when dragging markers, marker snaps to mouse-x instead of dragging smoothly
	EadFile: returned more detailed information when load/save fail (and show it to user)
	Globals: set whether File or Print output was last selected (variables already exist in PublisherSettings, and they are loaded and saved in Globals)
	MainScope: only enable m_actions->fileExportRetentionData when the user has set/verified peaks
	MainScope: add undo/redo
	MainWindow: when right-click on toolbar, don't give option to hide it
	MainWindow: Beep when done recording?
	PanelTabs: consider choosing equal widths for tabs, if space allows
	PanelTabs: draw shadow around active tab?
	RecordDialog: when trigger comes, somehow start saving data on EXACTLY the sample where the trigger occurred, rather than waiting for the next data block
	RecordSettingsDialog: on_sliderOffset_sliderMoved(): make it use increments of 1,000,000/0x7fff
	SweepWidget: when signal is out of range, make it visible somehow (limit to viewport?)
	TaskPublishWidget: add btnResetColors
	TaskPublishWidget: when printing the time of a recording, only print hour and minute (not seconds), but keep it localized!
	TaskPublishWidget: save user-title to EadFile
	TaskPublishWidget: pen width for signals (Peter's request)
	TaskPublishWidget: color of signals (Peter's request)
	TaskPublishWidget: when printing in black/white, need to make peak labels b/w too
	TaskPublishWidget: Qt BUG: SVG painting doesn't clip signals above and below the viewbox properly
	TaskReviewWidget: in Recording view, let user select any EAD/FID wave he wants (not just the averages)
	TaskReviewWidget: allow adding comments to average waves
	WaveEditorWidget: add a [Delete] command
	WaveEditorWidget: add a wave color?
	WaveEditorWidget: let user edit name

	Refactor: ChartPixmap: remove knowledge of the current EadTask (perform task-specific logic via other variables)
	Refactor: ChartScope: remove knowledge of the current EadTask (perform task-specific logic via other variables)
	Refactor: MainScope: move File|Open Recent from MainWindow to MainScope
	Refactor: Task*Scope: create scope classes for the Task widgets too
	Refactor: Rename widgets for the right side: View*Widget
	Refactor: only call Globals->file()->updateAveWaves() from ViewInfo?
	Refactor: WaveInfo: vwiUser is a HACK, see if we can improve this
	Refactor: TaskReviewWidget: figure out a way to use WaveEditorWidget instead of painting everything ourselves, but still maintain smooth drawing

Link for info about writing a MatLab plugin
	www.mathworks.com/access/helpdesk/help/pdf_doc/daq/adaptorkit.pdf

FILE FORMAT FROM OLD EAD PROGRAM (EXAMPLE1.EAD):
	04E2: BcDataSet<CR><NL><6F><BF><02><00>
	04F2: <9F><0F><00><00>: size
	04F6: EAD data start
	4372: EAD data end, then FID stuff
	      <42><43><02><00>... (11 bytes)
	437D: <9F><0F><00><00>: size
	81FD: FID data end
	0x02BF = 703
	0x0002BF6F = 180079
	81FD: 

